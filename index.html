<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D 5e Character Stat Roller</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="controls">
        <button id="rollAllBtn" class="btn">Tirar las 6 Estadísticas</button>
        <button id="rollOneBtn" class="btn">Tirar 1 Estadística</button>
        <button id="addManualBtn" class="btn btn-secondary">Añadir Manualmente</button>
    </div>

    <div class="app-container">

        <div class="dice-tray-area">
            <div id="diceTray" class="dice-tray">
                <p class="tray-placeholder">Presiona un botón para tirar los dados...</p>
            </div>
        </div>

        <div class="main-content">
            <div class="results-area" id="resultsArea">
                <div id="rollResults" class="results-grid"></div>

                <!-- =============================================================== -->
                <!-- ESTE ES EL BLOQUE QUE FALTABA. VA AQUÍ DENTRO DEL RESULTS-AREA -->
                <div id="statAnalysisBox" class="stat-analysis-box" hidden>
                    <h3>Análisis del Personaje</h3>
                    <p>Suma Total: <strong id="totalSum">72</strong></p>
                    <p>Éxito Promedio (DC 12): <strong id="avgSuccess">50%</strong></p>
                    <p id="statRecommendation" class="recommendation"></p>
                </div>
                <!-- =============================================================== -->

            </div>

            <div class="stats-area">
                <div class="stat-box" data-stat-name="Fuerza"><span class="stat-label">Fuerza (STR)</span><div class="stat-score drop-zone" data-stat="str" draggable="true">0</div><div class="stat-modifier">+0</div></div>
                <div class="stat-box" data-stat-name="Destreza"><span class="stat-label">Destreza (DEX)</span><div class="stat-score drop-zone" data-stat="dex" draggable="true">0</div><div class="stat-modifier">+0</div></div>
                <div class="stat-box" data-stat-name="Constitución"><span class="stat-label">Constitución (CON)</span><div class="stat-score drop-zone" data-stat="con" draggable="true">0</div><div class="stat-modifier">+0</div></div>
                <div class="stat-box" data-stat-name="Inteligencia"><span class="stat-label">Inteligencia (INT)</span><div class="stat-score drop-zone" data-stat="int" draggable="true">0</div><div class="stat-modifier">+0</div></div>
                <div class="stat-box" data-stat-name="Sabiduría"><span class="stat-label">Sabiduría (WIS)</span><div class="stat-score drop-zone" data-stat="wis" draggable="true">0</div><div class="stat-modifier">+0</div></div>
                <div class="stat-box" data-stat-name="Carisma"><span class="stat-label">Carisma (CHA)</span><div class="stat-score drop-zone" data-stat="cha" draggable="true">0</div><div class="stat-modifier">+0</div></div>
            </div>
        </div>
    </div>

    <dialog id="appModal">
        <form id="modalForm"><h3 id="modalTitle">Título del Modal</h3><p id="modalMessage">Mensaje del modal.</p><input type="number" id="modalInput" min="3" max="18" placeholder="Introduce un valor (3-18)"><div class="modal-actions"><button id="modalCancelBtn" class="btn btn-secondary" type="button">Cancelar</button><button id="modalConfirmBtn" class="btn" type="submit">Confirmar</button></div></form>
    </dialog>

    <script src="script.js"></script>
</body>
</html>